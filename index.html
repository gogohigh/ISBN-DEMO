<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
    <title>ISBN Î∞îÏΩîÎìú Ïä§Ï∫êÎÑà</title>
      <style>
          body { font-family: sans-serif; text-align: center; }
              #interactive { width: 100%; max-width: 400px; margin: auto; border: 2px solid #333; }
                  #result { margin-top: 20px; font-size: 18px; font-weight: bold; color: green; white-space: pre-line; }
                    </style>
                    </head>
                    <body>
                      <h1>üìö ISBN Î∞îÏΩîÎìú Ïä§Ï∫êÎÑà</h1>
                        <div id="interactive"></div>
                          <div id="result">üëâ Ï±ÖÏùò ISBNÏùÑ Ïπ¥Î©îÎùºÏóê ÎπÑÏ∂∞Î≥¥ÏÑ∏Ïöî</div>

                            <!-- QuaggaJS Î∂àÎü¨Ïò§Í∏∞ -->
                              <script src="https://unpkg.com/quagga/dist/quagga.min.js"></script>
                                <script>
                                    const API_KEY = "YOUR_API_KEY"; // Data4Library API ÌÇ§ ÎÑ£Í∏∞

                                        Quagga.init({
                                              inputStream: {
                                                      name: "Live",
                                                              type: "LiveStream",
                                                                      target: document.querySelector('#interactive'),
                                                                              constraints: { facingMode: "environment" }
                                                                                    },
                                                                                          decoder: { readers: ["ean_reader"] } // ISBN-13 = EAN-13 Í∑úÍ≤©
                                                                                              }, function(err) {
                                                                                                    if (err) { console.error(err); return; }
                                                                                                          console.log("Quagga Ï¥àÍ∏∞Ìôî ÏôÑÎ£å");
                                                                                                                Quagga.start();
                                                                                                                    });

                                                                                                                        // Ïä§Ï∫î ÏÑ±Í≥µ Ïãú Ïã§Ìñâ
                                                                                                                            Quagga.onDetected(async function(data) {
                                                                                                                                  const isbn = data.codeResult.code;
                                                                                                                                        document.getElementById("result").innerText = "üìñ ISBN: " + isbn + "\nÏ±Ö Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...";

                                                                                                                                              try {
                                                                                                                                                      const res = await fetch(`http://data4library.kr/api/srchDtlList?authKey=${API_KEY}&isbn13=${isbn}&format=json`);
                                                                                                                                                              const json = await res.json();
                                                                                                                                                                      const book = json.response.docs[0]?.doc;

                                                                                                                                                                              if (book) {
                                                                                                                                                                                        document.getElementById("result").innerText =
                                                                                                                                                                                                    `üìñ ISBN: ${isbn}\nÏ†úÎ™©: ${book.bookname}\nÏ†ÄÏûê: ${book.authors}\nÏ∂úÌåêÏÇ¨: ${book.publisher}`;
                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                      document.getElementById("result").innerText = `üìñ ISBN: ${isbn}\nÏ±Ö Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`;
                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                    } catch (err) {
                                                                                                                                                                                                                                            console.error(err);
                                                                                                                                                                                                                                                    document.getElementById("result").innerText = "‚ùå Ï±Ö Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.";
                                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                              });
                                                                                                                                                                                                                                                                </script>
                                                                                                                                                                                                                                                                </body>
                                                                                                                                                                                                                                                                </html>